(function(){namespace("com.mindspace.cafetownsend.service",{EmployeeManager:function(){function a(b,a,c){this.$http=b;this.$q=a;c.log("initializing Employee services...");this.list=[];this.selected=null;this.cache=this.loadEmployees();return this}a.$inject=["$http","$q","$log"];a.prototype.loadEmployees=function(){var b=this;if(!this.cache)this.cache=this.$http.get("data/members.json").success(function(a){return b.list=a});return this.cache.then(function(b){return b})};a.prototype.createEmployee=
function(){return this.saveEmployee({id:uuid.v1(),firstName:"",lastName:"",email:"",startDate:"01/09/2012",isNew:!0})};a.prototype.saveEmployee=function(b){if(null!=b)b.isNew=!0,this.findEmployee(b.id)||this.list.push(b);return b};a.prototype.deleteEmployee=function(b){var a,c;c=angular.isString(b)?b:b.id;a=[];angular.forEach(this.list,function(b){b.id!==c&&a.push(b);return b});return this.list=a};a.prototype.findEmployee=function(b){var a;a=null;angular.forEach(this.list,function(c){if(c.id===b)return a=
c});return a};return a}()});namespace("com.mindspace.cafetownsend.service",{SessionService:function(){function a(b){b.log("initializing Session services...");this.session={userName:"<your email>",password:"",authenticated:!1};return this}a.$inject=["$log"];a.prototype.logout=function(){this.session.authenticated=!1};return a}()});namespace("com.mindspace.cafetownsend.controller",{EmployeeController:function(){function a(b,a){this.$location=a;this.employees=b;return this}a.inject=["employeeManager",
"$location"];a.prototype.addNew=function(){this.edit(this.employees.createEmployee())};a.prototype.remove=function(b){if(!angular.isUndefined(b))this.employees.deleteEmployee(b),this.employees.selected=null};a.prototype.select=function(b){return this.employees.selected=b};a.prototype.edit=function(b){if(b)return this.select(b),this.$location.path("/employee/"+b.id),this.selected};return a}()});namespace("com.mindspace.cafetownsend.controller",{EmployeeEditController:function(){function a(b,a,c){var e;
this.employeeManager=b;this.$location=c;this.employee=this.employeeManager.findEmployee((null!=a?a.id:void 0)||(null!=(e=this.employeeManager.selected)?e.id:void 0));this.isEditing=this.employee.isNew||!1;return this}a.inject=["employeeManager","$routeParams","$location"];a.prototype.save=function(a){this.employeeManager.saveEmployee(a);this.selected=this.employeeManager.selected=a;this.selected.isNew=!1;return this.$location.path("/employee")};a.prototype.cancel=function(){if(this.isEditing)this.employeeManager.deleteEmployee(this.employee),
this.employee=this.employeeManager.selected=null;this.$location.path("/employee")};a.prototype.remove=function(){this.employeeManager.deleteEmployee(this.employee);this.employee=this.employeeManager.selected=null;this.$location.path("/employee")};return a}()});namespace("com.mindspace.cafetownsend.controller",{LoginController:function(){function a(a,d){this.sessionService=a;this.$location=d;return this}a.inject=["sessionService","$location"];a.prototype.authenticateUser=function(){var a;a=this.sessionService.session;
if(""!==a.userName&&"angular"===a.password)a.authenticated=!0,this.$location.path("/employee")};return a}()});namespace("com.mindspace.cafetownsend.controller",{SessionController:function(){function a(a,d,c){this.sessionService=a;this.$location=d;this.user=this.sessionService.session;c.parent(this);return this}a.inject=["sessionService","$location","$route"];a.prototype.logoutUser=function(){this.sessionService.logout();this.$location.path("/login")};return a}()});namespace("com.mindspace.cafetownsend",
{CafeTownsendApp:function(){function a(a,d,c,e,g,h){var f=this;this.sessionService=a;this.$location=c;this.$window=g;e.log("initializing CafeTownsend routes...");d.when("/login",{template:"data/partials/login.html",controller:com.mindspace.cafetownsend.controller.LoginController});d.when("/employee",{template:"data/partials/employees.html",controller:com.mindspace.cafetownsend.controller.EmployeeController});d.when("/employee/:id",{template:"data/partials/employee_edit.html",controller:com.mindspace.cafetownsend.controller.EmployeeEditController});
d.otherwise({redirectTo:"/employee"});h.$on("$afterRouteChange",function(){var a;a=(a=f.sessionService.session)&&a.authenticated;-1<(a?f.$location.path():"").indexOf("/employee")?f.$window.scrollTo(0,0):f.$location.path(a?"/employee":"/login");return!0});return this}a.$inject="sessionService,$route,$location,$log,$window,$rootScope".split(",");return a}()})}).call(this);
