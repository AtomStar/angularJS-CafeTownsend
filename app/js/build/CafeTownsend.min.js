var CafeTownsend,EmployeeController,EmployeeEditController,EmployeeManager,LoginController,SessionController,SessionServices;
CafeTownsend=function(){function b(a,d,c,e,g,h){var f=this;this.sessionService=a;this.$location=c;this.$window=g;e.log("initializing CafeTownsend routes...");d.when("/login",{template:"data/partials/login.html",controller:b.Controllers.LoginController});d.when("/employee",{template:"data/partials/employees.html",controller:b.Controllers.EmployeeController});d.when("/employee/:id",{template:"data/partials/employee_edit.html",controller:b.Controllers.EmployeeEditController});d.otherwise({redirectTo:"/employee"});
h.$on("$afterRouteChange",function(){var a;a=(a=f.sessionService.session)&&a.authenticated;-1<(a?f.$location.path():"").indexOf("/employee")?f.$window.scrollTo(0,0):f.$location.path(a?"/employee":"/login");return!0});return this}return b}();SessionServices=function(){function b(a){a.log("initializing Session services...");this.session={userName:"<your email>",password:"",authenticated:!1};return this}b.prototype.logout=function(){this.session.authenticated=!1};return b}();
SessionServices.$inject=["$log"];
EmployeeManager=function(){function b(a,b,c){this.$http=a;this.$q=b;c.log("initializing Employee services...");this.list=[];this.selected=null;this.cache=this.loadEmployees();return this}b.prototype.loadEmployees=function(){var a=this;if(!this.cache)this.cache=this.$http.get("data/members.json").success(function(b){return a.list=b});return this.cache.then(function(a){return a})};b.prototype.createEmployee=function(){return this.saveEmployee({id:uuid.v1(),firstName:"",lastName:"",email:"",startDate:"01/09/2012",
isNew:!0})};b.prototype.saveEmployee=function(a){if(null!=a)a.isNew=!0,this.findEmployee(a.id)||this.list.push(a);return a};b.prototype.deleteEmployee=function(a){var b,c;c=angular.isString(a)?a:a.id;b=[];angular.forEach(this.list,function(a){a.id!==c&&b.push(a);return a});return this.list=b};b.prototype.findEmployee=function(a){var b;b=null;angular.forEach(this.list,function(c){if(c.id===a)return b=c});return b};return b}();EmployeeManager.$inject=["$http","$q","$log"];
angular.module("CafeTownsend",[]).service("sessionServices",function(){this.$get=["$log",function(b){return new SessionServices(b)}]}).service("employeeManager",function(){this.$get=["$http","$q","$log",function(b,a,d){return new EmployeeManager(b,a,d)}]}).run(["sessionServices","$route","$location","$log","$window","$rootScope",CafeTownsend]);
SessionController=function(){function b(a,b,c){this.sessionService=a;this.$location=b;this.user=this.sessionService.session;c.parent(this);return this}b.prototype.logoutUser=function(){this.sessionService.logout();this.$location.path("/login")};return b}();
LoginController=function(){function b(a,b){this.sessionService=a;this.$location=b;return this}b.prototype.authenticateUser=function(){var a;a=this.sessionService.session;if(""!==a.userName&&"angular"===a.password)a.authenticated=!0,this.$location.path("/employee")};return b}();
EmployeeController=function(){function b(a,b){this.$location=b;this.employees=a;return this}b.prototype.addNew=function(){this.edit(this.employees.createEmployee())};b.prototype.remove=function(a){if(!angular.isUndefined(a))this.employees.deleteEmployee(a),this.employees.selected=null};b.prototype.select=function(a){return this.employees.selected=a};b.prototype.edit=function(a){if(a)return this.select(a),this.$location.path("/employee/"+a.id),this.selected};return b}();
EmployeeEditController=function(){function b(a,b,c){var e;this.delegate=a;this.$location=c;this.employee=this.delegate.findEmployee((null!=b?b.id:void 0)||(null!=(e=this.delegate.selected)?e.id:void 0));this.isEditing=this.employee.isNew||!1;return this}b.prototype.save=function(a){this.delegate.saveEmployee(a);this.selected=this.delegate.selected=a;this.selected.isNew=!1;return this.$location.path("/employee")};b.prototype.cancel=function(){if(this.isEditing)this.delegate.deleteEmployee(this.employee),
this.employee=this.delegate.selected=null;this.$location.path("/employee")};b.prototype.remove=function(){this.delegate.deleteEmployee(this.employee);this.employee=this.delegate.selected=null;this.$location.path("/employee")};return b}();CafeTownsend.Controllers={};CafeTownsend.Controllers.SessionController=SessionController;CafeTownsend.Controllers.SessionController.$inject=["sessionServices","$location","$route"];CafeTownsend.Controllers.LoginController=LoginController;
CafeTownsend.Controllers.LoginController.$inject=["sessionServices","$location"];CafeTownsend.Controllers.EmployeeController=EmployeeController;CafeTownsend.Controllers.EmployeeController.$inject=["employeeManager","$location"];CafeTownsend.Controllers.EmployeeEditController=EmployeeEditController;CafeTownsend.Controllers.EmployeeEditController.$inject=["employeeManager","$routeParams","$location"];
angular.directive("ng:focus",function(b){return function(a){return this.$watch(b,function(){var b;b=a[0];b.focus();return b.select()},a)}});angular.directive("ng:dblclick",function(b){return function(a){var d=this;return a.bind("dblclick",function(a){d.$apply(b);a.stopImmediatePropagation();return!1})}});
